entity State(landsys_state) {
    name String required unique
}

entity District(landsys_district) {
    name String required unique
}

entity SubDistrict(landsys_sub_district) {
    name String required
}

entity Village(landsys_village) {
    name String required
}


entity Unit(landsys_unit) {
    name String required
    conversionFactor  Double required
}

entity LandType(landsys_land_type) {
    name String required
    description String required
}

entity Land(landsys_land) {
   ulpin String
   khasraNumber String required
   area  Double
   landMarketValue  Double
   structuralValue  Double
   horticultureValue  Double
   forestValue  Double
   distanceFromCity String
   totalLandValue Double
}


entity Project(landsys_project) {
    name String required unique
    startDate  LocalDate required
    endDate  LocalDate required
    budget  Double required
    approver1 String
    approver2 String
    approver3 String
}


entity ProjectStatusHistory(landsys_project_status_history) {
    status ProjectStatus
    when  LocalDate
    remarks String
}


entity ProjectLand(landsys_project_land) {
    remarks String
    documents  AnyBlob
    hissaType HissaType
}


entity NotificationTemplate(landsys_notification_template) {
     name String
     templateText String
     defaultUse Boolean
     file  AnyBlob
}

entity PublicNotification(landsys_public_notification) {
    date  LocalDate
    file  AnyBlob
}


entity Bank(landsys_bank) {
    name String  required unique
    code String required unique
}


entity BankBranch(landsys_bank_branch) {
    name String required
    ifsc String required unique
    address String required
}

entity Citizen(landsys_citizen) {
    photo  ImageBlob
    name String required
    address String required
    accountNumber String
    fatherName String required
    spouseName String
    successorName String
    aadhar String required unique
    pan String unique
    aadharImage AnyBlob
    panImage  AnyBlob
    accountNo String unique
    accNoImage  ImageBlob
 }

enum KhatedarStatus {
    PENDING_FOR_SURVEY,
    SURVEY_CREATED,
    PENDING_FOR_COMPENSATION,
    COMPENSATION_CREATED,
    PENDING_FOR_PAYMENT,
    PAYMENT_DONE,
    CLOSED
}

entity Khatedar(landsys_khatedar) {
    caseFileNo String
    remarks String
    noticeFile  AnyBlob
    status KhatedarStatus
}


enum ProjectLevel {
    ROOT ("Top Level")
    STATE ("State Level")
    DISTRICT ("District Level")
    SUBDISTRICT ("SubDistrict Level")
    VILLAGE ("Village Level")
}
enum EventStatus {
	NEW
	OPEN
    IN_PROGRESS
	PENDING
    COMPLETED
	SENT
	ACCEPTED
	APPROVED
	PAID
	PENDING_FOR_SURVEY,
    SURVEY_CREATED,
    PENDING_FOR_COMPENSATION,
    COMPENSATION_CREATED,
    PENDING_FOR_PAYMENT,
    PAYMENT_DONE,
    CLOSED
}

enum ProjectStatus {
    NEW
    INPROGRESS
    COMPLETED
}

enum NoticeStatus {
  SENT
  ACCEPTED
}

enum PaymentStatus {
  PENDING
  APPROVED
  PAID
}
enum SurveyStatus
{
  OPEN
  CLOSED
}
enum CompensationStatus
{
  OPEN
  CLOSED
}


enum PaymentAdviceType
{
  ONLINE
  CHECQUE
  OTHER
}

enum HissaType {
    SINGLE_OWNER("Single Owner")
    JOINT_OWNER("Joint Owner")
    DIVIDED("divided")
}
entity LandCompensation(land_Compensation) {
    hissaType                HissaType required
    area                     Double required
    sharePercentage          Double required
    landMarketValue          Double required
    structuralCompensation   Double
    horticultureCompensation Double
    forestCompensation       Double
    solatiumMoney            Double
    additionalCompensation   Double
	status			 		 CompensationStatus
	orderDate              	 LocalDate
	paymentAmount			 Double
	transactionId			 String
}

entity PaymentAdvice(landsys_Payment_Advice) {
	accountHolderName			String required
    paymentAmount               Double required
	bankName			 		String required
	accountNumber				String required
	ifscCode			 		String required
	checkNumber			 		String
	micrCode			 		String
	paymentAdviceType			PaymentAdviceType
	referenceNumber		     	String unique
	paymentStatus	 			PaymentStatus required
    hissaType HissaType required
}


entity PaymentFile(landsys_payment_file) {
	paymentFileId               Double required
    totalPaymentAmount          Double required
	paymentFileDate           	LocalDate
	paymentStatus	 			PaymentStatus required
    bankName                    String
    ifscCode                    String
}

entity PaymentFileRecon(landsys_payment_file_recon) {
	primaryHolderName			String required
    paymentAmount               Double required
	paymentDate              	LocalDate
	utrNumber                  String required
	referenceNumber		     	String unique
	paymentStatus	 			PaymentStatus required
}


entity Survey(landsys_Survey) {
	surveyor          	String required
    hissaType           HissaType required
    sharePercentage     Double required
	area			 	Double required
	landMarketValue  	Double required
    structuralValue   	Double
    horticultureValue 	Double
    forestValue       	Double
	distanceFromCity    Double
    remarks         	String
	status			 	SurveyStatus
}

entity NoticeStatusInfo(landsys_notice_status) {
	status			 	NoticeStatus
}

entity TransactionHistory(landsys_transaction_history)
{
    projectName String required
    khasraNumber String required
    state String required
    citizenName String required
    citizenAadhar String required
    surveyerName String
    landValue String required
    paymentAmount Double
    accountNumber String
    bankName String
    transactionId String
    transactionType String
    eventType String
    eventStatus EventStatus
    approver1 String
    approver2 String
    approver3 String
}

relationship OneToOne {
    Land{state(name)} to State{land(khasraNumber) required}
	Survey{khatedar} to Khatedar{survey required}
	PaymentFileRecon{paymentAdvice} to PaymentAdvice{paymentFileRecon required}
}


relationship ManyToOne {
    ProjectLand{project(name) required} to Project{projectLand required}
	ProjectLand{land(khasraNumber) required} to Land{projectLand required}
	Khatedar{citizen(name) required} to Citizen{khatedar required}
	Khatedar{projectLand required} to ProjectLand{khatedar required}
	Survey{projectLand required} to ProjectLand{survey required}
	LandCompensation{khatedar required} to Khatedar{landCompensation required}
	LandCompensation{survey required} to  Survey{landCompensation required}
	LandCompensation{projectLand required} to  ProjectLand{landCompensation required}
	PaymentAdvice{projectLand required} to ProjectLand{paymentAdvice required}
	PaymentAdvice{landCompensation required} to LandCompensation{paymentAdvice required}
	Land{village(name) required} to Village{land(khasraNumber) required}
	Land{unit(name) required} to  Unit{land(khasraNumber) required}
	Land{LandType(name) required} to LandType{land(khasraNumber) required}
	SubDistrict{district(name) required} to District{subDistrict required}
	BankBranch{bank(name)} to Bank{bankName required}
	State{district} to District{state(name) required}
    Village{subDistrict(name)} to SubDistrict{village required}
 	Citizen{bankBranch(name)}  to BankBranch{citizen required}
	Khatedar{noticeStatusInfo} to NoticeStatusInfo{khatedar required}
	ProjectLand{noticeStatusInfo} to NoticeStatusInfo{projectLand required}
}

paginate * with pagination
service all with serviceImpl
dto all with mapstruct
filter Citizen , Survey , LandCompensation , Project , Khatedar, PaymentFileRecon, NoticeStatusInfo, PaymentAdvice , TransactionHistory
